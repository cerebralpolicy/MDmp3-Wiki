{%- assign artists = site.data.tracklist -%}
{%- assign footnotes = 0 -%}
{% for row in artists | sort: row.artist%}
{%- assign flagURL = '"https://flagcdn.com/' | append: row.origin | append: '.svg"' -%}

<div style="display:flex; align-items:center; width: 100%; height:28px">
    <h2 style="display: flex; line-height: 24px; align-self:auto; padding-bottom: 4px" id="{{row.artist}}">
        <div style="margin-right: 20; align-self:auto">
            <div style="width:96px; height:24px; background: #000;clip-path: polygon(20% 0%, 100% 0%, 80% 100%, 0% 100%);">
                <div style="display:flex; width:100%; height:100%; clip-path: polygon(22.5% 8%, 95% 8%, 77.5% 92%, 5% 92%); align-items:center;"><img width="100%" src={{flagURL}}></div>
            </div>
        </div>
        <div style="align-self: flex-start;">{{row.artist}}</div>
    </h2>
</div>
<hr>
<br>
<table style="">
    <tr>
        <th style="width: 20%;">Name</th>
        <th style="width: 24%;">Album</th>
        <th style="width: 4%;">Year</th>
        <th style="width: 35%;">Spotify</th>
        <th>Contexts</th>
    </tr>
    {%- assign tracks = row.tracks | sort: 'track' | sort: 'year' -%}
    {%- for song in tracks  %}
    <tr>
        <td>{{song.track}}</td>
        <td>{{song.album}}</td>
        <td>{{song.year}}</td>
        <td style="align-items: center;">
            {%- assign songID = song.spotifyID -%}
            {%- assign songLink = "https://open.spotify.com/embed/track/" | append: songID | append: "?utm_source=generator&theme=0" -%}
            <iframe style="border-radius:12px" src="{{songLink}}" width="100%" height="32" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
        </td>
        <td>
            {%- if song.battle == true -%}
            {%- assign alt-txt = "battle" | capitalize -%}
            {%- assign ico = '"assets/context-icons/' | append: alt-txt | append: '.svg"' -%}
            {%- assign context-ico = "<img src=" | append: ico | append: ' width="32px" height="32px" title="' | append: alt-txt | append: '"/>&nbsp' -%}
            {{- context-ico -}}
            {%- endif -%}
            {%- if song.exploration == true -%}
            {%- assign alt-txt = "exploration" | capitalize -%}
            {%- assign ico = '"assets/context-icons/' | append: alt-txt | append: '.svg"' -%}
            {%- assign context-ico = "<img src=" | append: ico | append: ' width="32px" height="32px" title="' | append: alt-txt | append: '"/>&nbsp' -%}
            {{- context-ico -}}
            {%- endif -%}
            {%- if song.boss == true -%}
            {%- assign alt-txt = "boss" | capitalize -%}
            {%- assign ico = '"assets/context-icons/' | append: alt-txt | append: '.svg"' -%}
            {%- assign context-ico = "<img src=" | append: ico | append: ' width="32px" height="32px" title="' | append: alt-txt | append: '"/>&nbsp' -%}
            {{- context-ico -}}
            {%- endif -%}
            {%- if song.special == true -%}
            {%- assign alt-txt = "special" | capitalize -%}
            {%- assign ico = '"assets/context-icons/' | append: alt-txt | append: '.svg"' -%}
            {%- assign context-ico = "<img src=" | append: ico | append: ' width="32px" height="32px" title="' | append: alt-txt | append: '"/>&nbsp' -%}
            {{- context-ico -}}
            {%- endif -%}
            {%- if song.menu == true -%}
            {%- assign alt-txt = "menu" | capitalize -%}
            {%- assign ico = '"assets/context-icons/' | append: alt-txt | append: '.svg"' -%}
            {%- assign context-ico = "<img src=" | append: ico | append: ' width="32px" height="32px" title="' | append: alt-txt | append: '"/>&nbsp' -%}
            {{- context-ico -}}
            {%- endif -%}
        </td>
    </tr>
    {%- assign context_icos = empty -%}
    {%- endfor %}
</table>
<hr>
{% endfor %}